# .github/workflows/toto-generator.yml
name: TOTO Number Generator

on:
  schedule:
    # Run every day at 4:00 PM SGT (10:00 AM UTC)
    - cron: '0 8 * * *'

  # Allow manual trigger
  workflow_dispatch:

jobs:
  generate-toto-numbers:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v4

    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'

    - name: Install Python dependencies
      run: pip install requests

    - name: Generate TOTO numbers
      run: |
        echo "ðŸŽ² Generating TOTO numbers..."
        python toto-generator.py
        echo "ðŸ“„ Checking if file was created..."
        ls -la toto_numbers.json

    - name: Send Telegram notification
      env:
        TELEGRAM_BOT_TOKEN: ${{ secrets.TELEGRAM_BOT_TOKEN }}
        TELEGRAM_CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
      run: |
        echo "ðŸ“± Sending Telegram notification..."
        python send_telegram.py